<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <header>
    </header>

    <head>
        <!-- JS, Popper.js, and jQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.js"
            integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css"
            rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script>
        <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
        <link rel="stylesheet" href="../css/style.css">

        <!--Load highcharts js -->

        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/accessibility.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <!-- optional -->
        <script src="https://code.highcharts.com/modules/offline-exporting.js"></script>
        <script src="https://code.highcharts.com/modules/export-data.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.css">

        <!--Load D3.js -->
        <script src="https://d3js.org/d3.v6.min.js">  </script>

        <!-- Load billboard.js via cdn -->
        <script src="https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.js"></script>

    </head>

    <%- include("partials/sidebar_top") %>

        <!-- Main Component -->

        <div class="main">

            <nav class="navbar navbar-expand">
                <button class="toggler-btn" type="button">
                    <i class="lni lni-text-align-left"></i>
                </button>
            </nav>
            <main class="p-3">

                <div class="row">

                    <!-- Pie Chart -->
                    <div class="col-xl-4 col-lg-5">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->

                            <!-- Card Body -->
                            <div class="card-body">

                                <div id="gaugeCornerRadius_1"></div>

                                <div class="mt-4 text-center small">
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-primary"></i> Del
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-success"></i> total
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-info"></i> de la Cmdb
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-5">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->

                            <!-- Card Body -->
                            <div class="card-body">

                                <div id="gaugeCornerRadius_2"></div>

                                <div class="mt-4 text-center small">
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-primary"></i> Del
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-success"></i> total
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-info"></i> de la Cmdb
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-5">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->

                            <!-- Card Body -->
                            <div class="card-body">

                                <div id="donutCornerRadius"></div>

                                <div class="mt-4 text-center small">
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-primary"></i> Direct
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-success"></i> Social
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle text-info"></i> Referral
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">

                    <figure class="highcharts-figure">
                        <div id="container"></div>
                        <p class="highcharts-description">
                            This chart shows the use of a logarithmic y-axis. Logarithmic axes can
                            be useful when dealing with data with spikes or large value gaps,
                            as they allow variance in the smaller values to remain visible.
                        </p>
                    </figure>


                </div>
        </div>
        </div>
        <br />

        <br />
        </div>
        </main>
        </div>
        </div>

        <script src="../scripts/script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        </body>
        <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>

</html>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- % de equipos en estado aplicados  -->
<script>
    fetch('http://localhost:3000/aplicados')
        .then(response => response.json())
        .then(data => {

            const aplicados = data.map(item => item.aplicados);
            console.log(aplicados)

            var chart = bb.generate({
                color: {
                    pattern: ["green", "blue"]
                },
                data: {
                    columns: [


                        [

                            "Aplicados", aplicados

                        ]
                    ],
                    type: "gauge",
                },
                arc: {
                    cornerRadius: 15
                },
                gauge: {
                    arcLength: 70,
                    fullCircle: true,
                    label: {
                        extents: function () { return ""; }
                    },
                    startingAngle: -2.2,
                    width: 25
                },
                bindto: "#gaugeCornerRadius_1"
            });

        })
        .catch(error => console.error('Error fetching data:', error));

</script>

<!-- % de equipos en  otros estados   -->
<script>
    fetch('http://localhost:3000/Estado') // Replace this with the actual path to your PHP script
        .then(response => response.json())
        .then(data => {

            const reparacion = data.map(item => item.reparacion);
            const fin = data.map(item => item.find);
            const fuera = data.map(item => item.fuera);
            console.log(reparacion)
            console.log(fin)

            const a = reparacion
            var result = a.map(function (x) {
                return parseInt(x, 10);
            });


            ////////////////////////////////
            var chart2 = bb.generate({
                color: {
                    pattern: ["skyblue", "orange", "red", "blue"]

                },
                data: {
                    columns: [
                        ["En reparacion", reparacion],
                        ["Fin de vida util", fin],
                        ["Fin de servicio", fuera],

                    ],
                    type: "gauge", // for ESM specify as: gauge()
                },
                arc: {
                    cornerRadius: {
                        ratio: 0.5
                    }
                },
                gauge: {
                    type: "multi",
                    arcLength: 95,
                    fullCircle: true,
                    label: {
                        extents: function () { return ""; }
                    },
                    startingAngle: -3,
                    width: 50
                },
                bindto: "#gaugeCornerRadius_2"
            });
        })
        .catch(error => console.error('Error fetching data:', error));


</script>

<!-- Core plugin JavaScript-->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
<!-- Custom scripts for all pages-->
<script>
    fetch('http://localhost:3000/ex') // Replace this with the actual path to your PHP script
        .then(response => response.json())
        .then(data => {
            const playerNames = data.map(item => item.player_name);
            const scores = data.map(item => item.score_avg);
            console.log(scores)

            const a = scores
            var result = a.map(function (x) {
                return parseInt(x, 10);
            });
            console.log(playerNames)

            Highcharts.chart('container', {
                title: {
                    text: 'Numero de Incidencias activa (Por tecnico)'
                },

                accessibility: {
                    point: {
                        valueDescriptionFormat:
                            '{xDescription}{separator}{value} million(s)'
                    }
                },

                xAxis: {
                    title: {
                        text: 'Year'
                    },
                    categories: playerNames
                },


                yAxis: {
                    type: 'logarithmic',
                    title: {
                        text: 'Number of Internet Users (in millions)'
                    }
                },

                tooltip: {
                    headerFormat: '<b>{series.name}</b><br />',
                    pointFormat: '{point.y} million(s)'
                },



                series: [{
                    name: 'Internet Users',
                    keys: ['y', 'color'],
                    data: result,
                    color: {
                        linearGradient: {
                            x1: 0,
                            x2: 0,
                            y1: 1,
                            y2: 0
                        },
                        stops: [
                            [0, '#0000ff'],
                            [1, '#ff0000']
                        ]
                    }
                }],




            });

            ////////////////////////////////

        })
        .catch(error => console.error('Error fetching data:', error));


</script>
<!-- Page level plugins -->
<script src="vendor/chart.js/Chart.min.js"></script>
<!-- Page level custom scripts -->

<script>
    fetch('http://localhost:3000/ex') // Replace this with the actual path to your PHP script
        .then(response => response.json())
        .then(data => {
            const playerNames = data.map(item => item.player_name);
            const scores = data.map(item => item.score_avg);
            console.log(scores[3])
            var chart = bb.generate({
                data: {
                    columns: [
                        ["data11", scores[2]],
                        ["data2", scores[3]],
                        ["data3", scores[4]]

                    ],
                    type: "donut", // for ESM specify as: donut()
                },
                arc: {
                    cornerRadius: {
                        ratio: 0.2
                    }
                },
                bindto: "#donutCornerRadius"



            });
        })
        .catch(error => console.error('Error fetching data:', error));



</script>